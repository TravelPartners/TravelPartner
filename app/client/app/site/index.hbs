<link rel="stylesheet" href="/site/site.css" />
<link href="https://fonts.googleapis.com/css?family=Gamja+Flower" rel="stylesheet">

<div id="myCarousel" class="carousel slide" style="margin-top:-2em;height:550px">
<!-- （Carousel）indicators -->
<ol class="carousel-indicators">
  <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
  <li data-target="#myCarousel" data-slide-to="1"></li>
  <li data-target="#myCarousel" data-slide-to="2"></li>
</ol>
<!-- （Carousel）objects -->
<div class="carousel-inner" style="height:100%;">
    <div class="item active">
        <img src="https://images.unsplash.com/photo-1508652362825-2a44637db8e2?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=358d1b06fafc4456cc24e627c07450f9&auto=format&fit=crop&w=1950&q=80" alt="First slide">
  </div>
  <div class="item">
    <img src="https://images.unsplash.com/photo-1491002052546-bf38f186af56?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=36540868671b0e7942ab946c0e44503d&auto=format&fit=crop&w=1983&q=80" alt="Second slide">
  </div>
  <div class="item">
    <img src="https://images.unsplash.com/photo-1504205154056-8d885e35c317?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=4d6ce2a76b94ffcaf72e107ef06653d7&auto=format&fit=crop&w=1950&q=80" alt="Third slide">
  </div>
</div>
<!-- （Carousel）navigator -->
<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
  <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
  <span class="sr-only">Previous</span>
</a>
<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
  <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
  <span class="sr-only">Next</span>
</a>
</div>

<!--user container to limit the size-->
<div class="container" style="margin-top:3em; margin-bottom:5em;">
    <h2 style="color:#8B8989;text-align:center;font-family:Gamja Flower"><em>Travel is a beautiful missing,
      missing is a beautiful journey.Not to let others be able</em></h2>
    <h2 style="color:#8B8989;text-align:center; font-family:Gamja Flower"><em>
   to temporarily forget me,but in order to let others be able to think of me.</em></h2>
<br>
<br>
  <p class="paragraph" style="font-size:25px;">{{introduction}}</p>

  <div style="color:#666699;" >Begin Your Travel!</div>
  <div id="google-map"  style="width:100%;height:500px; ">
  </div>
<br><br>


<div>
  <div>
    <h3 style="color:#666699;">Share Your Travel Stories</h3>
  </div>
  <div class="row" style="background-color: white;">
    <div>
      <!--left part uses "sender" class-->
        {{#with firstGuide}}
            <div class="sender">
              <!--avatar takes 1/12 of the row-->
              <div class="col-sm-1">
                  <img class="img-circle" style="width:100%; float: left;" src="{{ avatar }}">
              </div>
            <div>
                <div class="left_triangle"></div>
                <span>
                    <div class="container" style="width:500px; background-color:transparent;">
                      <!-- in the bubble of sender contains information of a travel-->
                            <div class="">
                                <br><br>
                                <p class="paragraph text-info" style="text-align:left;">
                                    <a  target="_blank" href={{url}} >{{title}}</a>
                                </p>
                                <div style="float: left;">by</div> <p ><i><b>&nbsp{{user}}</i></b> </p>
                                <div>  <img style="width:100%; height:100%;" src="{{image }}" > </div>
                                <p><em>{{summary}}<a class="text-info" href={{url}} target="_blank">view more.</em></a></p>
                            </div>
                    </div>
                </span>
              </div>
            </div>
        {{/with}}

        {{#with secondGuide}}
        <!-- Right -->
         <div class="receiver">
            <div class="col-sm-1" style="text-align:right;">
              <!--avatar takes 1/12 of the row-->

                <img class="img-circle" style="width:100%;" src="{{ avatar }}">
            </div>
            <div>
                <div class="right_triangle"></div>
                <span>
                    <div  style="width:500px; background-color:transparent;">
                            <div class="">
                                <br><br>
                                <div style="text-align:right;">
                                  <!-- in the bubble of receiver contains information of a travel-->
                                <p class="paragraph text-info" style="text-align:right;">
                                    <a href={{url}} target="_blank" >{{title}}</a>
                                </p>
                                <div style="text-align:right;">
                                 <p >by <i><b>&nbsp{{user}}</i></b> </p>
                              </div>
                                <div>  <img style="width:100%; height:100%;" src="{{ image }}" > </div>
                                <p><em>{{summary}}<a class="text-info" href={{url}} target="_blank">view more.</em></a></p>
                              </div>
                            </div>
                    </div>
                </span>
            </div>
        </div>
        {{/with}}


        {{#with thirdGuide}}
            <div class="sender">
              <div class="col-sm-1">
                <!--avatar takes 1/12 of the row-->
                  <img class="img-circle" style="width:100%; float: left;" src="{{ avatar }}">
              </div>
            <div>
                <div class="left_triangle"></div>
                <span>
                    <div class="container" style="width:500px; background-color:transparent;">
                            <div class="">
                                <br><br>
                                <!-- in the bubble of sender contains information of a travel-->
                                <p class="paragraph text-info" style="text-align:left;">
                                    <a  target="_blank" href={{url}} >{{title}}</a>
                                </p>
                                <div style="float: left;">by</div> <p ><i><b>&nbsp{{user}}</i></b> </p>
                                <div>  <img style="width:100%; height:100%;" src="{{image }}" > </div>
                                <p><em>{{summary}}<a class="text-info" href={{url}} target="_blank">view more.</em></a></p>
                            </div>
                    </div>
                </span>
              </div>
            </div>
        {{/with}}

    </div>
  </div>
</div>





</div>
<!-- top button-->
<button onclick="topFunction()" id="myBtn" type="button" class="btn btn-primary" style="position: fixed; bottom: 20px;right: 30px;">Top</button>
</div>

<script type="text/javascript">
 window.onscroll = function() {scrollFunction()};

//the top button only shows in certain height
 function scrollFunction() {
     if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
         document.getElementById("myBtn").style.display = "block";
     } else {
         document.getElementById("myBtn").style.display = "none";
     }
 }

 function topFunction() {
     document.body.scrollTop = 0;
     document.documentElement.scrollTop = 0;
 }


 function initMap() {
     var places = [];
     var placesNames = [];
     var placesUrls = [];
     var markers = [];

     /**
      * places : Object Array
      * Object inside places:
      *   { name: xxx, geo: { lat:xxx, lng:xxx }}
      */
     {{#each places}}

     places.push({ lat: {{ geo.lat }}, lng: {{ geo.lng }} });
     placesNames.push("{{ name }}");
     placesUrls.push("{{ url }}");

     {{/each}}
console.log(placesUrls);
     var googleMap = new google.maps.Map(document.getElementById('google-map'), {
         zoom: 4,
         center: places[0]
     });
//for the markers in the map, addListener to each marker,
//when the marker is clicked, new web site will be jumped to 
     for (var i = 0; i < places.length; ++i) {
         markers.push(new google.maps.Marker({ position: places[i], map: googleMap}));
         markers[i].addListener('click', ((i)=>{
             return function () {
                 window.location = placesUrls[i];
             };
         })(i));
     }
 }
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAsmrS2NY9Ld9Yn4LAdgdH0hRxIIfI7AeI&callback=initMap" type="text/javascript"></script>
